# 项目部署和使用指南

## 项目概述

已成功创建了一个基于Python 2.7.18和FFmpeg的自动化视频剪辑工具，具备以下核心功能：

### ✅ 已完成的功能

1. **自动扫描视频文件** - 支持递归扫描文件夹或指定单个文件
2. **智能混剪算法** - 三种策略：随机、顺序、平衡
3. **自定义时长** - 可指定任意目标视频时长
4. **去除音频** - 自动去除原声，便于后续添加音频和字幕
5. **高质量输出** - 支持自定义分辨率、帧率、编码参数
6. **多格式支持** - MP4、AVI、MOV、MKV、WMV、FLV、WebM等

### 📁 项目文件结构

```
d:\FF\FFPR\
├── 核心模块
│   ├── video_editor.py      # 主程序（简化版）
│   ├── cli.py              # 命令行界面（完整版，推荐）
│   ├── config.py           # 配置管理模块
│   ├── video_processor.py  # 视频处理逻辑
│   ├── ffmpeg_renderer.py  # FFmpeg渲染器
│   └── utils.py            # 工具函数
├── 配置文件
│   └── config.json         # 默认配置
├── 启动脚本
│   ├── run.bat            # Windows启动脚本
│   └── run.sh             # Linux/macOS启动脚本
├── 示例和测试
│   ├── example_auto.py     # 自动化脚本示例
│   └── test_environment.py # 环境测试脚本
└── 文档
    └── README.md           # 详细使用说明
```

## 🚀 快速开始

### 1. 环境验证
已确认您的环境配置：
- ✅ Python 2.7.18 (路径: D:/Software/Python27/python.exe)
- ✅ 项目模块导入正常
- ⚠️ **需要安装FFmpeg**

### 2. 安装FFmpeg

#### Windows安装方法
1. 下载FFmpeg: https://ffmpeg.org/download.html
2. 解压到目录（如 `C:\ffmpeg`）
3. 将 `C:\ffmpeg\bin` 添加到系统PATH环境变量
4. 重启命令行，测试：`ffmpeg -version`

### 3. 运行程序

#### 方法一：使用启动脚本（推荐）
```batch
# Windows
run.bat

# Linux/macOS  
chmod +x run.sh
./run.sh
```

#### 方法二：直接运行Python
```batch
# 完整功能版本（推荐）
"D:/Software/Python27/python.exe" cli.py

# 简化版本
"D:/Software/Python27/python.exe" video_editor.py
```

### 4. 使用流程

1. **选择输入方式**：扫描文件夹或指定文件
2. **设置目标时长**：输入期望的视频时长（秒）
3. **选择混剪策略**：随机/顺序/平衡（推荐随机）
4. **配置输出**：文件名、目录、质量参数
5. **开始处理**：确认后自动生成混剪视频

## 📋 使用示例

### 基本使用
```
请选择输入方式:
1. 扫描文件夹（包含子文件夹）
2. 扫描文件夹（仅当前文件夹）
3. 指定单个视频文件
请选择 (1-3): 1

请输入文件夹路径: D:\Videos\Source
请输入目标视频时长（秒）: 120
请选择混剪策略 (1-3): 1
输出文件名: my_mixed_video
```

### 高级配置示例
- **分辨率**: 1920x1080 (默认) / 1280x720 / 自定义
- **帧率**: 30fps (默认) / 24fps / 60fps
- **质量**: CRF 23 (默认, 平衡) / 18 (高质量) / 28 (小文件)
- **预设**: medium (默认) / fast (快速) / slow (高压缩)

## 🔧 高级功能

### 1. 自动化脚本
使用 `example_auto.py` 进行编程控制：
```python
# 自动化处理
python example_auto.py

# 可编程接口
from config import Config
from video_processor import VideoProcessor
from ffmpeg_renderer import FFmpegRenderer
```

### 2. 批量处理
支持一次性处理多个项目，自动化工作流程。

### 3. 自定义配置
修改 `config.json` 来调整默认参数：
- 支持的视频格式
- 默认输出参数  
- FFmpeg路径设置
- 临时文件管理

## ⚡ 性能优化建议

1. **硬件要求**
   - 推荐SSD硬盘（提升处理速度）
   - 至少4GB内存
   - 多核CPU（编码加速）

2. **参数调优**
   - 大文件：降低分辨率或提高CRF值
   - 快速处理：使用 `fast` 或 `ultrafast` 预设
   - 高质量：使用 `slow` 预设和低CRF值

3. **磁盘空间**
   - 确保足够空间（约为输入文件20%）
   - 定期清理临时文件夹

## 🛠️ 故障排除

### 常见问题及解决方案

| 问题 | 解决方案 |
|------|----------|
| "未找到FFmpeg" | 安装FFmpeg并添加到PATH环境变量 |
| "视频文件无效" | 检查文件是否损坏，格式是否支持 |
| "渲染失败" | 检查磁盘空间，降低输出分辨率 |
| "内存不足" | 减少同时处理的视频数量 |

### 测试环境
运行环境测试脚本：
```batch
"D:/Software/Python27/python.exe" test_environment.py
```

## 📝 注意事项

1. **音频处理**: 输出视频会自动去除音频，这是设计特性，方便后续添加自定义音频和字幕

2. **文件格式**: 推荐使用MP4格式输出，兼容性最佳

3. **版权合规**: 请遵守相关视频版权法律法规，仅用于合法内容

4. **备份重要文件**: 处理前建议备份原始视频文件

## 🎯 下一步操作

1. **安装FFmpeg**（必需）
2. **运行测试脚本**确认环境正常
3. **准备视频文件**放入指定文件夹
4. **运行程序**开始混剪
5. **根据需要调整参数**优化输出效果

项目已完全配置就绪，只需安装FFmpeg即可开始使用！
